<!doctype html>
<html lang="en"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>HappyDoggoSupport Admin Panel</title> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
  <style>
        :root {
            --primary: #ff6b6b;
            --primary-dark: #ff5252;
            --secondary: #4ecdc4;
            --accent: #ffd166;
            --dark: #2d3436;
            --light: #f7f9f9;
            --gray: #a5b1c2;
            --text: #2d3436;
            --success: #06d6a0;
            --sidebar: #2c3e50;
            --sidebar-hover: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--text);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }
        
        /* Login Page */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        .login-form {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
        }
        
        .login-logo {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary);
        }
        
        .login-logo h1 {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.8rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .login-btn {
            width: 100%;
            padding: 0.8rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background: var(--primary-dark);
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 1rem;
            text-align: center;
            display: none;
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background: var(--sidebar);
            color: white;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            display: none;
        }
        
        .logo {
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }
        
        .logo i {
            color: var(--secondary);
        }
        
        .nav-links {
            list-style: none;
            padding: 1rem 0;
        }
        
        .nav-links li {
            padding: 0;
        }
        
        .nav-links a {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #bdc3c7;
            text-decoration: none;
            padding: 1rem 1.5rem;
            transition: all 0.3s;
        }
        
        .nav-links a:hover, .nav-links a.active {
            background: var(--sidebar-hover);
            color: white;
            border-left: 4px solid var(--primary);
        }
        
        .nav-links i {
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 2rem;
            display: none;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .header h1 {
            color: var(--dark);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .logout-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        /* Dashboard Stats */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-icon.blue {
            background: var(--primary);
        }
        
        .stat-icon.green {
            background: var(--secondary);
        }
        
        .stat-icon.orange {
            background: #e67e22;
        }
        
        .stat-icon.red {
            background: #e74c3c;
        }
        
        .stat-info h3 {
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
        }
        
        .stat-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .section-header h2 {
            color: var(--dark);
            font-size: 1.5rem;
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-green {
            background: var(--secondary);
        }
        
        .btn-green:hover {
            background: #27ae60;
        }
        
        .btn-red {
            background: #e74c3c;
        }
        
        .btn-red:hover {
            background: #c0392b;
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: var(--dark);
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .status {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status.completed {
            background: #d4edda;
            color: #155724;
        }
        
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            padding: 0.4rem 0.8rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .edit-btn {
            background: var(--primary);
            color: white;
        }
        
        .delete-btn {
            background: #e74c3c;
            color: white;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        
        .modal-header h2 {
            color: var(--dark);
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        .close-btn:hover {
            color: var(--dark);
        }
        
        /* Data Management Panel */
        .data-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .data-panel h3 {
            margin-bottom: 1rem;
            color: var(--dark);
        }
        
        .data-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        /* Main Page Editor */
        .editor-section {
            margin-bottom: 2rem;
        }
        
        .editor-section h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }
            
            .sidebar .logo-text, .sidebar .link-text {
                display: none;
            }
            
            .main-content {
                margin-left: 70px;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .data-actions {
                flex-direction: column;
            }
        }
    </style> 
 </head> 
 <body> <!-- Login Page --> 
  <div class="login-container" id="login-container"> 
   <div class="login-form"> 
    <div class="login-logo"> 
     <h1><i class="fas fa-paw"></i> HappyDoggoSupport Admin</h1> 
    </div> 
    <form id="login-form"> 
     <div class="form-group"> <label for="username">Username</label> 
      <input type="text" id="username" class="form-control" required> 
     </div> 
     <div class="form-group"> <label for="password">Password</label> 
      <input type="password" id="password" class="form-control" required> 
     </div> <button type="submit" class="login-btn">Login</button> 
     <div class="error-message" id="login-error">
      Invalid username or password
     </div> 
    </form> 
   </div> 
  </div> <!-- Sidebar --> 
  <div class="sidebar" id="sidebar"> 
   <div class="logo"> 
    <h2><i class="fas fa-paw"></i> <span class="logo-text">HappyDoggo Admin</span></h2> 
   </div> 
   <ul class="nav-links"> 
    <li><a href="#" class="active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> <span class="link-text">Dashboard</span></a></li> 
    <li><a href="#" data-section="donors"><i class="fas fa-users"></i> <span class="link-text">Donors</span></a></li> 
    <li><a href="#" data-section="content"><i class="fas fa-edit"></i> <span class="link-text">Page Content</span></a></li> 
    <li><a href="#" data-section="settings"><i class="fas fa-cog"></i> <span class="link-text">Settings</span></a></li> 
    <li><a href="index.html" target="_blank"><i class="fas fa-external-link-alt"></i> <span class="link-text">View Site</span></a></li> 
   </ul> 
  </div> <!-- Main Content --> 
  <div class="main-content" id="main-content"> 
   <div class="header"> 
    <h1>Admin Dashboard</h1> 
    <div class="user-info"> 
     <div class="user-avatar">
      AD
     </div> <span>Admin User</span> <button class="logout-btn" id="logout-btn">Logout</button> 
    </div> 
   </div> <!-- Dashboard Section --> 
   <div class="content-section" id="dashboard-section"> <!-- Stats --> 
    <div class="stats-container"> 
     <div class="stat-card"> 
      <div class="stat-icon blue"> <i class="fas fa-donate"></i> 
      </div> 
      <div class="stat-info"> 
       <h3 id="total-donations">$0</h3> 
       <p>Total Donations</p> 
      </div> 
     </div> 
     <div class="stat-card"> 
      <div class="stat-icon green"> <i class="fas fa-users"></i> 
      </div> 
      <div class="stat-info"> 
       <h3 id="total-donors">0</h3> 
       <p>Total Donors</p> 
      </div> 
     </div> 
     <div class="stat-card"> 
      <div class="stat-icon orange"> <i class="fas fa-dog"></i> 
      </div> 
      <div class="stat-info"> 
       <h3 id="total-dogs">0</h3> 
       <p>Active Dogs</p> 
      </div> 
     </div> 
     <div class="stat-card"> 
      <div class="stat-icon red"> <i class="fas fa-hand-holding-usd"></i> 
      </div> 
      <div class="stat-info"> 
       <h3>$8,420</h3> 
       <p>Monthly Goal</p> 
      </div> 
     </div> 
    </div> <!-- Recent Donors --> 
    <div class="content-section"> 
     <div class="section-header"> 
      <h2>Recent Donors</h2> 
      <div> <button class="btn" id="export-donors">Export to CSV</button> <button class="btn btn-green" id="add-donor-btn">Add Donor</button> 
      </div> 
     </div> 
     <div class="table-container"> 
      <table> 
       <thead> 
        <tr> 
         <th>Name</th> 
         <th>Email</th> 
         <th>Amount</th> 
         <th>Date</th> 
         <th>Status</th> 
         <th>Actions</th> 
        </tr> 
       </thead> 
       <tbody id="donors-table"> <!-- Donor data will be populated by JavaScript --> 
       </tbody> 
      </table> 
     </div> 
    </div> <!-- Data Management Panel --> 
    <div class="data-panel"> 
     <h3>Data Management</h3> 
     <div class="data-actions"> <button class="btn" id="load-sample-data">Load Sample Data</button> <button class="btn btn-green" id="export-all-data">Export All Data</button> <button class="btn btn-red" id="clear-all-data">Clear All Data</button> <button class="btn" id="refresh-data">Refresh Data</button> 
     </div> 
     <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--gray);"> <i class="fas fa-info-circle"></i> All data is stored in your browser's localStorage and will persist between sessions. </p> 
    </div> 
   </div> <!-- Donors Section --> 
   <div class="content-section" id="donors-section" style="display: none;"> 
    <div class="section-header"> 
     <h2>Manage Donors</h2> <button class="btn btn-green" id="add-donor-btn-2">Add New Donor</button> 
    </div> 
    <div class="table-container"> 
     <table> 
      <thead> 
       <tr> 
        <th>Name</th> 
        <th>Email</th> 
        <th>Amount</th> 
        <th>Date</th> 
        <th>Status</th> 
        <th>Actions</th> 
       </tr> 
      </thead> 
      <tbody id="donors-table-2"> <!-- Donor data will be populated by JavaScript --> 
      </tbody> 
     </table> 
    </div> 
   </div> <!-- Page Content Editor Section --> 
   <div class="content-section" id="content-section" style="display: none;"> 
    <div class="section-header"> 
     <h2>Page Content Editor</h2> <button class="btn btn-green" id="save-content-btn">Save All Changes</button> 
    </div> 
    <div class="editor-section"> 
     <h3>Hero Section</h3> 
     <div class="form-group"> <label for="hero-title">Hero Title</label> 
      <input type="text" id="hero-title" class="form-control"> 
     </div> 
     <div class="form-group"> <label for="hero-description">Hero Description</label> <textarea id="hero-description" class="form-control"></textarea> 
     </div> 
     <div class="form-group"> <label for="hero-image">Hero Image URL</label> 
      <input type="text" id="hero-image" class="form-control"> 
     </div> 
    </div> 
    <div class="editor-section"> 
     <h3>Impact Section</h3> 
     <div class="form-row"> 
      <div class="form-group"> <label for="dogs-rescued">Dogs Rescued</label> 
       <input type="number" id="dogs-rescued" class="form-control"> 
      </div> 
      <div class="form-group"> <label for="funds-raised">Funds Raised</label> 
       <input type="text" id="funds-raised" class="form-control"> 
      </div> 
     </div> 
     <div class="form-row"> 
      <div class="form-group"> <label for="adoption-rate">Adoption Rate (%)</label> 
       <input type="number" id="adoption-rate" class="form-control"> 
      </div> 
      <div class="form-group"> <label for="volunteers">Volunteers</label> 
       <input type="number" id="volunteers" class="form-control"> 
      </div> 
     </div> 
    </div> 
    <div class="editor-section"> 
     <h3>Contact Information</h3> 
     <div class="form-group"> <label for="contact-email">Contact Email</label> 
      <input type="email" id="contact-email" class="form-control"> 
     </div> 
     <div class="form-group"> <label for="contact-phone">Contact Phone</label> 
      <input type="text" id="contact-phone" class="form-control"> 
     </div> 
    </div> 
    <div class="editor-section"> 
     <h3>Payment Settings</h3> 
     <div class="form-group"> <label for="flutterwave-key">Flutterwave Public Key</label> 
      <input type="text" id="flutterwave-key" class="form-control"> 
     </div> 
     <div class="form-group"> <label for="bybit-wallet">Bybit Wallet Address</label> 
      <input type="text" id="bybit-wallet" class="form-control"> 
     </div> 
    </div> 
   </div> <!-- Settings Section --> 
   <div class="content-section" id="settings-section" style="display: none;"> 
    <div class="section-header"> 
     <h2>Admin Settings</h2> 
    </div> 
    <div class="editor-section"> 
     <h3>Admin Account</h3> 
     <div class="form-group"> <label for="admin-username">Username</label> 
      <input type="text" id="admin-username" class="form-control"> 
     </div> 
     <div class="form-group"> <label for="admin-password">New Password</label> 
      <input type="password" id="admin-password" class="form-control"> 
     </div> 
     <div class="form-group"> <label for="admin-password-confirm">Confirm New Password</label> 
      <input type="password" id="admin-password-confirm" class="form-control"> 
     </div> <button class="btn btn-green" id="update-admin-btn">Update Admin Account</button> 
    </div> 
    <div class="editor-section"> 
     <h3>System Information</h3> 
     <div class="form-group"> <label>Last Backup</label> 
      <input type="text" class="form-control" id="last-backup" readonly> 
     </div> 
     <div class="form-group"> <label>Data Size</label> 
      <input type="text" class="form-control" id="data-size" readonly> 
     </div> <button class="btn" id="backup-data-btn">Backup Data Now</button> 
    </div> 
   </div> 
  </div> <!-- Add/Edit Donor Modal --> 
  <div class="modal" id="donor-modal"> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <h2 id="donor-modal-title">Add New Donor</h2> <button class="close-btn donor-close">Ã—</button> 
    </div> 
    <form id="donor-form"> 
     <input type="hidden" id="donor-id"> 
     <div class="form-row"> 
      <div class="form-group"> <label for="donor-name">Full Name</label> 
       <input type="text" id="donor-name" class="form-control" required> 
      </div> 
      <div class="form-group"> <label for="donor-email">Email</label> 
       <input type="email" id="donor-email" class="form-control" required> 
      </div> 
     </div> 
     <div class="form-row"> 
      <div class="form-group"> <label for="donor-amount">Amount ($)</label> 
       <input type="number" id="donor-amount" class="form-control" required> 
      </div> 
      <div class="form-group"> <label for="donor-date">Date</label> 
       <input type="date" id="donor-date" class="form-control" required> 
      </div> 
     </div> 
     <div class="form-row"> 
      <div class="form-group"> <label for="donor-status">Status</label> <select id="donor-status" class="form-control" required> <option value="completed">Completed</option> <option value="pending">Pending</option> </select> 
      </div> 
     </div> 
     <div class="form-group"> <button type="submit" class="btn btn-green">Save Donor</button> <button type="button" class="btn btn-red" id="cancel-donor">Cancel</button> 
     </div> 
    </form> 
   </div> 
  </div> 
  <script>
        // Data storage keys
        const STORAGE_KEYS = {
            DONORS: 'happydoggosupport_donors',
            CONTENT: 'happydoggosupport_content',
            CONFIG: 'happydoggosupport_config',
            ADMIN: 'happydoggosupport_admin'
        };

        // Default admin credentials
        const DEFAULT_ADMIN = {
            username: 'admin',
            password: 'password123'
        };

        // Sample data - used if no data exists in localStorage
        const SAMPLE_DONORS = [
            { id: 1, name: "John Smith", email: "john@example.com", amount: 100, date: "2023-06-15", status: "completed" },
            { id: 2, name: "Sarah Johnson", email: "sarah@example.com", amount: 50, date: "2023-06-14", status: "completed" },
            { id: 3, name: "Michael Brown", email: "michael@example.com", amount: 250, date: "2023-06-13", status: "pending" },
            { id: 4, name: "Emily Davis", email: "emily@example.com", amount: 75, date: "2023-06-12", status: "completed" },
            { id: 5, name: "Robert Wilson", email: "robert@example.com", amount: 500, date: "2023-06-10", status: "completed" }
        ];

        const SAMPLE_CONTENT = {
            hero: {
                title: "We Want to Fix the Global Street Dog Problem",
                description: "Your donation provides medical care, food, and shelter for street dogs waiting for their forever homes.",
                image: "https://images.unsplash.com/photo-1450778869180-41d0601e046e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1586&q=80"
            },
            impact: {
                dogsRescued: 1247,
                fundsRaised: "$32,500",
                adoptionRate: 94,
                volunteers: 312
            },
            contact: {
                email: "wearehappydoggo@gmail.com",
                phone: "+1 (312) 677-9365"
            }
        };

        const SAMPLE_CONFIG = {
            payment: {
                flutterwaveKey: "FLWPUBK-f65ccea1da28aaae9541a8ea4ff5fc93-X",
                bybitWallet: "TUehgCTHvGA9bVLJrq4tgkRBykQTZHU2wS"
            }
        };

        // Data variables
        let donors = [];
        let content = {};
        let config = {};
        let admin = {};

        // DOM Elements
        const loginContainer = document.getElementById('login-container');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const logoutBtn = document.getElementById('logout-btn');
        const donorsTable = document.getElementById('donors-table');
        const donorsTable2 = document.getElementById('donors-table-2');
        const donorModal = document.getElementById('donor-modal');
        const donorForm = document.getElementById('donor-form');
        const donorModalTitle = document.getElementById('donor-modal-title');
        const addDonorBtn = document.getElementById('add-donor-btn');
        const addDonorBtn2 = document.getElementById('add-donor-btn-2');
        const cancelDonorBtn = document.getElementById('cancel-donor');
        const closeBtns = document.querySelectorAll('.close-btn');
        const exportDonorsBtn = document.getElementById('export-donors');
        const loadSampleDataBtn = document.getElementById('load-sample-data');
        const exportAllDataBtn = document.getElementById('export-all-data');
        const clearAllDataBtn = document.getElementById('clear-all-data');
        const refreshDataBtn = document.getElementById('refresh-data');
        const totalDonationsEl = document.getElementById('total-donations');
        const totalDonorsEl = document.getElementById('total-donors');
        const saveContentBtn = document.getElementById('save-content-btn');
        const updateAdminBtn = document.getElementById('update-admin-btn');
        const backupDataBtn = document.getElementById('backup-data-btn');
        const navLinks = document.querySelectorAll('.nav-links a');

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            checkLoginStatus();
            
            // Load data
            loadData();
            
            // Set up event listeners
            setupEventListeners();
            
            // Load content into editor
            loadContentIntoEditor();
        });

        // Check login status
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('happydoggosupport_admin_logged_in');
            if (isLoggedIn === 'true') {
                showAdminPanel();
            } else {
                showLoginPage();
            }
        }

        // Show login page
        function showLoginPage() {
            loginContainer.style.display = 'flex';
            sidebar.style.display = 'none';
            mainContent.style.display = 'none';
        }

        // Show admin panel
        function showAdminPanel() {
            loginContainer.style.display = 'none';
            sidebar.style.display = 'block';
            mainContent.style.display = 'block';
            renderDashboard();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Login form
            loginForm.addEventListener('submit', handleLogin);
            
            // Logout button
            logoutBtn.addEventListener('click', handleLogout);
            
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    showSection(section);
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Donor management
            addDonorBtn.addEventListener('click', openAddDonorModal);
            addDonorBtn2.addEventListener('click', openAddDonorModal);
            cancelDonorBtn.addEventListener('click', closeDonorModal);
            donorForm.addEventListener('submit', saveDonor);
            
            // Data management
            exportDonorsBtn.addEventListener('click', exportDonorsToCSV);
            loadSampleDataBtn.addEventListener('click', loadSampleData);
            exportAllDataBtn.addEventListener('click', exportAllData);
            clearAllDataBtn.addEventListener('click', clearAllData);
            refreshDataBtn.addEventListener('click', refreshData);
            
            // Content management
            saveContentBtn.addEventListener('click', saveContent);
            updateAdminBtn.addEventListener('click', updateAdminAccount);
            backupDataBtn.addEventListener('click', backupData);
            
            // Close modals when clicking outside or on close button
            closeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.classList.contains('donor-close')) {
                        closeDonorModal();
                    }
                });
            });
            
            window.addEventListener('click', function(event) {
                if (event.target === donorModal) closeDonorModal();
            });
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Load admin data
            const storedAdmin = localStorage.getItem(STORAGE_KEYS.ADMIN);
            admin = storedAdmin ? JSON.parse(storedAdmin) : {...DEFAULT_ADMIN};
            
            if (username === admin.username && password === admin.password) {
                localStorage.setItem('happydoggosupport_admin_logged_in', 'true');
                showAdminPanel();
            } else {
                loginError.style.display = 'block';
            }
        }

        // Handle logout
        function handleLogout() {
            localStorage.removeItem('happydoggosupport_admin_logged_in');
            showLoginPage();
        }

        // Show specific section
        function showSection(section) {
            // Hide all sections
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('donors-section').style.display = 'none';
            document.getElementById('content-section').style.display = 'none';
            document.getElementById('settings-section').style.display = 'none';
            
            // Show selected section
            document.getElementById(`${section}-section`).style.display = 'block';
            
            // If showing donors, render their tables
            if (section === 'donors') {
                renderDonorsTable(donorsTable2);
            }
        }

        // Data Management Functions
        function loadData() {
            // Load donors from localStorage or use sample data
            const storedDonors = localStorage.getItem(STORAGE_KEYS.DONORS);
            donors = storedDonors ? JSON.parse(storedDonors) : [...SAMPLE_DONORS];
            
            // Load content from localStorage or use sample data
            const storedContent = localStorage.getItem(STORAGE_KEYS.CONTENT);
            content = storedContent ? JSON.parse(storedContent) : {...SAMPLE_CONTENT};
            
            // Load config from localStorage or use sample data
            const storedConfig = localStorage.getItem(STORAGE_KEYS.CONFIG);
            config = storedConfig ? JSON.parse(storedConfig) : {...SAMPLE_CONFIG};
            
            // Load admin from localStorage or use default
            const storedAdmin = localStorage.getItem(STORAGE_KEYS.ADMIN);
            admin = storedAdmin ? JSON.parse(storedAdmin) : {...DEFAULT_ADMIN};
            
            // If we loaded sample data, save it to localStorage
            if (!storedDonors) localStorage.setItem(STORAGE_KEYS.DONORS, JSON.stringify(donors));
            if (!storedContent) localStorage.setItem(STORAGE_KEYS.CONTENT, JSON.stringify(content));
            if (!storedConfig) localStorage.setItem(STORAGE_KEYS.CONFIG, JSON.stringify(config));
            if (!storedAdmin) localStorage.setItem(STORAGE_KEYS.ADMIN, JSON.stringify(admin));
        }

        function saveData() {
            localStorage.setItem(STORAGE_KEYS.DONORS, JSON.stringify(donors));
            localStorage.setItem(STORAGE_KEYS.CONTENT, JSON.stringify(content));
            localStorage.setItem(STORAGE_KEYS.CONFIG, JSON.stringify(config));
            localStorage.setItem(STORAGE_KEYS.ADMIN, JSON.stringify(admin));
            renderDashboard();
        }

        function loadSampleData() {
            if (confirm('This will replace all current data with sample data. Continue?')) {
                donors = [...SAMPLE_DONORS];
                content = {...SAMPLE_CONTENT};
                config = {...SAMPLE_CONFIG};
                saveData();
                loadContentIntoEditor();
                alert('Sample data loaded successfully!');
            }
        }

        function clearAllData() {
            if (confirm('This will permanently delete all data. Continue?')) {
                donors = [];
                content = {};
                config = {};
                saveData();
                loadContentIntoEditor();
                alert('All data cleared!');
            }
        }

        function exportAllData() {
            const data = {
                donors: donors,
                content: content,
                config: config,
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'happydoggosupport_data.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        function refreshData() {
            loadData();
            renderDashboard();
            loadContentIntoEditor();
            alert('Data refreshed!');
        }

        // Dashboard Rendering
        function renderDashboard() {
            renderDonorsTable(donorsTable);
            updateStats();
        }

        function updateStats() {
            // Calculate total donations
            const totalDonations = donors.reduce((sum, donor) => sum + donor.amount, 0);
            totalDonationsEl.textContent = `$${totalDonations.toLocaleString()}`;
            
            // Update donor count
            totalDonorsEl.textContent = donors.length;
        }

        // Render donors table
        function renderDonorsTable(tableElement) {
            tableElement.innerHTML = '';
            
            if (donors.length === 0) {
                tableElement.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 2rem;">No donors found</td></tr>';
                return;
            }
            
            donors.forEach(donor => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${donor.name}</td>
                    <td>${donor.email}</td>
                    <td>$${donor.amount}</td>
                    <td>${donor.date}</td>
                    <td><span class="status ${donor.status}">${donor.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit-btn" data-id="${donor.id}" data-type="donor">Edit</button>
                            <button class="action-btn delete-btn" data-id="${donor.id}" data-type="donor">Delete</button>
                        </div>
                    </td>
                `;
                
                tableElement.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn[data-type="donor"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const donorId = this.getAttribute('data-id');
                    editDonor(donorId);
                });
            });
            
            document.querySelectorAll('.delete-btn[data-type="donor"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const donorId = this.getAttribute('data-id');
                    deleteDonor(donorId);
                });
            });
        }

        // Donor Management Functions
        function openAddDonorModal() {
            donorModalTitle.textContent = 'Add New Donor';
            donorForm.reset();
            document.getElementById('donor-id').value = '';
            
            // Set today's date as default
            document.getElementById('donor-date').valueAsDate = new Date();
            
            donorModal.style.display = 'flex';
        }

        function closeDonorModal() {
            donorModal.style.display = 'none';
        }

        function editDonor(id) {
            const donor = donors.find(d => d.id == id);
            
            if (donor) {
                donorModalTitle.textContent = 'Edit Donor';
                document.getElementById('donor-id').value = donor.id;
                document.getElementById('donor-name').value = donor.name;
                document.getElementById('donor-email').value = donor.email;
                document.getElementById('donor-amount').value = donor.amount;
                document.getElementById('donor-date').value = donor.date;
                document.getElementById('donor-status').value = donor.status;
                
                donorModal.style.display = 'flex';
            }
        }

        function saveDonor(e) {
            e.preventDefault();
            
            const id = document.getElementById('donor-id').value;
            const name = document.getElementById('donor-name').value;
            const email = document.getElementById('donor-email').value;
            const amount = parseInt(document.getElementById('donor-amount').value);
            const date = document.getElementById('donor-date').value;
            const status = document.getElementById('donor-status').value;
            
            if (id) {
                // Update existing donor
                const index = donors.findIndex(d => d.id == id);
                if (index !== -1) {
                    donors[index] = { 
                        id: parseInt(id), 
                        name, 
                        email, 
                        amount, 
                        date, 
                        status 
                    };
                }
            } else {
                // Add new donor
                const newId = donors.length > 0 ? Math.max(...donors.map(d => d.id)) + 1 : 1;
                donors.push({ 
                    id: newId, 
                    name, 
                    email, 
                    amount, 
                    date, 
                    status 
                });
            }
            
            saveData();
            closeDonorModal();
            alert('Donor saved successfully!');
        }

        function deleteDonor(id) {
            if (confirm('Are you sure you want to delete this donor?')) {
                donors = donors.filter(d => d.id != id);
                saveData();
                alert('Donor deleted successfully!');
            }
        }

        // Content Management Functions
        function loadContentIntoEditor() {
            // Hero section
            document.getElementById('hero-title').value = content.hero?.title || '';
            document.getElementById('hero-description').value = content.hero?.description || '';
            document.getElementById('hero-image').value = content.hero?.image || '';
            
            // Impact section
            document.getElementById('dogs-rescued').value = content.impact?.dogsRescued || '';
            document.getElementById('funds-raised').value = content.impact?.fundsRaised || '';
            document.getElementById('adoption-rate').value = content.impact?.adoptionRate || '';
            document.getElementById('volunteers').value = content.impact?.volunteers || '';
            
            // Contact information
            document.getElementById('contact-email').value = content.contact?.email || '';
            document.getElementById('contact-phone').value = content.contact?.phone || '';
            
            // Payment settings
            document.getElementById('flutterwave-key').value = config.payment?.flutterwaveKey || '';
            document.getElementById('bybit-wallet').value = config.payment?.bybitWallet || '';
            
            // Admin settings
            document.getElementById('admin-username').value = admin.username || '';
            
            // System information
            document.getElementById('last-backup').value = new Date().toLocaleString();
            updateDataSize();
        }

        function saveContent() {
            // Hero section
            content.hero = {
                title: document.getElementById('hero-title').value,
                description: document.getElementById('hero-description').value,
                image: document.getElementById('hero-image').value
            };
            
            // Impact section
            content.impact = {
                dogsRescued: parseInt(document.getElementById('dogs-rescued').value) || 0,
                fundsRaised: document.getElementById('funds-raised').value,
                adoptionRate: parseInt(document.getElementById('adoption-rate').value) || 0,
                volunteers: parseInt(document.getElementById('volunteers').value) || 0
            };
            
            // Contact information
            content.contact = {
                email: document.getElementById('contact-email').value,
                phone: document.getElementById('contact-phone').value
            };
            
            // Payment settings
            config.payment = {
                flutterwaveKey: document.getElementById('flutterwave-key').value,
                bybitWallet: document.getElementById('bybit-wallet').value
            };
            
            saveData();
            alert('Content saved successfully!');
        }

        function updateAdminAccount() {
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            const passwordConfirm = document.getElementById('admin-password-confirm').value;
            
            if (!username) {
                alert('Username cannot be empty!');
                return;
            }
            
            if (password && password !== passwordConfirm) {
                alert('Passwords do not match!');
                return;
            }
            
            admin.username = username;
            if (password) {
                admin.password = password;
            }
            
            saveData();
            alert('Admin account updated successfully!');
            
            // Clear password fields
            document.getElementById('admin-password').value = '';
            document.getElementById('admin-password-confirm').value = '';
        }

        function backupData() {
            exportAllData();
            document.getElementById('last-backup').value = new Date().toLocaleString();
            alert('Backup completed!');
        }

        function updateDataSize() {
            const dataSize = JSON.stringify({
                donors: donors,
                content: content,
                config: config,
                admin: admin
            }).length;
            
            const sizeInKB = (dataSize / 1024).toFixed(2);
            document.getElementById('data-size').value = `${sizeInKB} KB`;
        }

        // Export Functions
        function exportDonorsToCSV() {
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Name,Email,Amount,Date,Status\n";
            
            donors.forEach(donor => {
                csvContent += `${donor.name},${donor.email},${donor.amount},${donor.date},${donor.status}\n`;
            });
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "happydoggosupport_donors.csv");
            document.body.appendChild(link);
            
            link.click();
            document.body.removeChild(link);
        }
    </script> 
</body></html>